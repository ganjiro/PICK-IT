{% extends 'base.html' %}

{% block content %}
    <style>
    img{
        border-radius: 25px;
    }
    </style>
    <h1>{% block title %} Welcome Lol Picker App {% endblock %}</h1>



    <div class="container">
        <div class="row">
            <div class="col align-self-start">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ0">
            </div>

            <div class="col align-self-end">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ5">
            </div>
        </div>
        <div class="row">
            <div class="col align-self-start">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ1">
            </div>

            <div class="col align-self-end">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ6">
            </div>
        </div>
        <div class="row">
            <div class="col align-self-start">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ2">
            </div>

            <div class="col align-self-end">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ7">
            </div>
        </div>
        <div class="row">
            <div class="col align-self-start">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ3">
            </div>

            <div class="col align-self-end">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ8">
            </div>
        </div>
        <div class="row">
            <div class="col align-self-start">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ4">
            </div>

            <div class="col align-self-end">
                <img src="https://via.placeholder.com/150" class="img-thumbnail"
                     alt="..." id="champ9">
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            var patch = ""
            $.getJSON("https://ddragon.leagueoflegends.com/api/versions.json", function (lol) {

                patch = lol[0]

            });

             var intervalId = window.setInterval(function () {


                
                $.ajax({
                    type: "POST",
                    url: "/check_gamestatus",
                    data: {id: true},
                    dataType: 'JSON',
                    success: function (response) {

                        console.log(response[0]);
                        $.getJSON("https://ddragon.leagueoflegends.com/cdn/" + patch + "/data/it_IT/championFull.json", function (lol) {
                            for (let i = 0; i < 10; i++) {
                                if (response[i]["pick"] === 0) continue;
                                champ = lol["keys"][response[i]["pick"]];
                                img = lol["data"][champ]["image"]["full"];
                                document.getElementById("champ" + i).src = "https://ddragon.leagueoflegends.com/cdn/" + patch + "/img/champion/" + img;

                            }
                        });

                    },
                    error: function (response) {
                        console.log(response);
                    }

                });
            },1000);
        })
        ;


    </script>

{% endblock %}

